<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.inabananami.japanesedemo.dao.mapper.WordMapper">
    <insert id="add" parameterType="com.inabananami.japanesedemo.dao.pojo.Word" useGeneratedKeys="true" keyProperty="id">
        insert into word(japanese_word,chinese_word,romaji,kana,type,example_sentence,create_user,create_time,update_time)
        values(#{japaneseWord},#{chineseWord},#{romaji},#{kana},#{type},#{exampleSentence},#{createUser},now(),now());
    </insert>
    <update id="update">
        update word
        <set>
            <if test="japaneseWord!=null">japanese_word=#{japaneseWord},</if>
            <if test="chineseWord!=null">chinese_word=#{chineseWord},</if>
            <if test="romaji!=null">romaji=#{romaji},</if>
            <if test="kana!=null">kana=#{kana},</if>
            <if test="type!=null">type=#{type},</if>
            <if test="exampleSentence!=null">example_sentence=#{exampleSentence},</if>
            <if test="createUser!=null">create_user=#{createUser},</if>
            <if test="true">update_time=now(),</if>
        </set>
        <where>id=#{id}</where>
    </update>
    <delete id="delete">
        delete from word where id=#{id};
    </delete>
    <select id="search" parameterType="com.inabananami.japanesedemo.dao.pojo.Word">
        select * from word where
        japanese_word like concat('%',#{keyWord},'%')
        or chinese_word like concat('%',#{keyWord},'%')
        or kana like concat('%',#{keyWord},'%')
        or romaji like concat('%',#{keyWord},'%')
        or type like concat('%',#{keyWord},'%')
    </select>
    <select id="findWordById" parameterType="com.inabananami.japanesedemo.dao.pojo.Word">
        select * from word where id=#{id};
    </select>
    <select id="listAll" parameterType="com.inabananami.japanesedemo.dao.pojo.Word">
        select * from word;
    </select>
</mapper>